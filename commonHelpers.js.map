{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from 'axios';\n\nconst KEY = '42718144-5d5fd5e0a4a425e2316f701b3';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst loader = document.querySelector('.loader');\nlet perPage = 15;\nexport async function fetchData(searchQuery, currentPage) {\n    const params = new URLSearchParams({\n        key: KEY,\n        q: searchQuery,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: currentPage,\n    per_page: perPage\n    });\n   loader.style.display = 'block';\n    try {\n        const response = await axios.get(`${BASE_URL}?${params}`)\n        if (!response.status === 200) {\n            throw new Error('Network response was not OK!');\n        }\n        const data = response.data;\n loader.style.display = 'none';\n        if (data.hits.length === 0) {\n            iziToast.error({\n                fontSize: 'large',\n                close: false,\n                position: 'topRight',\n                messageColor: 'white',\n                timeout: 2000,\n                backgroundColor: 'red',\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n            });\n        }\n        return data;\n    }\n    catch (error) { console.error('Error fetching data:', error) }\n}\n  \n","export function render(images) {\nconst murckup = images.hits\n        .map(image => `<div class=\"gallery-item\">\n                <a class=\"item-link\" href=\"${image.largeImageURL}\"> \n                    <img\n                        class=\"item-image\"\n                        src=\"${image.webformatURL}\"\n                        alt=\"${image.tags}\"\n                        /></a>\n                    <div class=\"item-image-info\">\n                        <p class=\"info-title\">Likes <span class=\"info-data\">${image.likes}</span></p>\n                        <p class=\"info-title\">Views <span class=\"info-data\">${image.views}</span></p>\n                        <p class=\"info-title\">Comments <span class=\"info-data\">${image.comments}</span></p>\n                        <p class=\"info-title\">Downloads <span class=\"info-data\">${image.downloads}</span></p>\n                    </div>\n               \n            </div>\n            `)\n    .join(\"\");\n    return  murckup\n}","import { fetchData } from './js/pixabay-api.js';\nimport { render } from './js/render-functions.js'\n\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\"#searchForm\");\nconst container = document.querySelector(\".gallery\");\nconst input = document.querySelector('[name=\"searchQuery\"]');\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\nlet searchQuery = \"\";\nlet currentPage = 1;\nlet totalHits = 0;\nloadMoreBtn.style.display = \"none\";\n\nform.addEventListener(\"submit\", onSubmit);\nloadMoreBtn.addEventListener(\"click\", onLoadMore);\nconst lightbox =\n    new SimpleLightbox('.gallery a', {\n        nav: true,\n        captions: true,\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\nfunction onSubmit(event) {\n    event.preventDefault();\n    container.innerHTML = \"\";\n    currentPage = 1;\n    searchQuery = input.value.trim();\ngetImages()\n}\n\nfunction getImages() { \n    fetchData(searchQuery, currentPage).then(data => {\n        totalHits = data.totalHits;\n    container.insertAdjacentHTML(\"beforeend\", render(data));\n    lightbox.refresh();\n    handleLoadMoreButton(data);        \n})\n    .catch(error => {\n        console.log(error);\n    });\n}\nfunction onLoadMore() {\n    currentPage++;\n    getImages();\n}\nfunction handleLoadMoreButton(data) {\n    if (container.children.length < totalHits) {\n    loadMoreBtn.style.display = \"block\";\n  } else {\n    const currentHits = currentPage * 15;\n    if (currentHits >= totalHits) {\n      loadMoreBtn.style.display = \"none\";\n      iziToast.info({\n        title: 'Info',\n        message: `We're sorry, but you've reached the end of search results.`,\n        backgroundColor: '#4CAF50',\n        messageColor: '#fff',\n        titleColor: '#fff',\n        progressBarColor: '#4CAF50',\n        position: 'topRight',\n      });\n    } else {\n      renderMurcup(data); \n    }\n  }\n}\n\nfunction smoothScroll() {\n  const itemHeight = container.firstElementChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: 3 * itemHeight,\n    behavior: \"smooth\",\n  });\n}\n\ncontainer.addEventListener(\"scroll\", smoothScroll);\n"],"names":["KEY","BASE_URL","loader","perPage","fetchData","searchQuery","currentPage","params","response","axios","data","iziToast","error","render","images","image","form","container","input","loadMoreBtn","totalHits","onSubmit","onLoadMore","lightbox","SimpleLightbox","event","getImages","handleLoadMoreButton","smoothScroll","itemHeight"],"mappings":"owBAIA,MAAMA,EAAM,qCACNC,EAAW,2BAEXC,EAAS,SAAS,cAAc,SAAS,EAC/C,IAAIC,EAAU,GACP,eAAeC,EAAUC,EAAaC,EAAa,CACtD,MAAMC,EAAS,IAAI,gBAAgB,CAC/B,IAAKP,EACL,EAAGK,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACV,SAAUH,CACd,CAAK,EACFD,EAAO,MAAM,QAAU,QACtB,GAAI,CACA,MAAMM,EAAW,MAAMC,EAAM,IAAI,GAAGR,CAAQ,IAAIM,CAAM,EAAE,EACxD,GAAI,CAACC,EAAS,SAAW,IACrB,MAAM,IAAI,MAAM,8BAA8B,EAElD,MAAME,EAAOF,EAAS,KAC7B,OAAAN,EAAO,MAAM,QAAU,OACZQ,EAAK,KAAK,SAAW,GACrBC,EAAS,MAAM,CACX,SAAU,QACV,MAAO,GACP,SAAU,WACV,aAAc,QACd,QAAS,IACT,gBAAiB,MACjB,QAAS,0EACzB,CAAa,EAEED,CACV,OACME,EAAO,CAAE,QAAQ,MAAM,uBAAwBA,CAAK,CAAG,CAClE,CCzCO,SAASC,EAAOC,EAAQ,CAmB3B,OAlBYA,EAAO,KACd,IAAIC,GAAS;AAAA,6CACuBA,EAAM,aAAa;AAAA;AAAA;AAAA,+BAGjCA,EAAM,YAAY;AAAA,+BAClBA,EAAM,IAAI;AAAA;AAAA;AAAA,8EAGqCA,EAAM,KAAK;AAAA,8EACXA,EAAM,KAAK;AAAA,iFACRA,EAAM,QAAQ;AAAA,kFACbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,aAIpF,EACR,KAAK,EAAE,CAEZ,CCXA,MAAMC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAQ,SAAS,cAAc,sBAAsB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAC3D,IAAId,EAAc,GACdC,EAAc,EACdc,EAAY,EAChBD,EAAY,MAAM,QAAU,OAE5BH,EAAK,iBAAiB,SAAUK,CAAQ,EACxCF,EAAY,iBAAiB,QAASG,CAAU,EAChD,MAAMC,EACF,IAAIC,EAAe,aAAc,CAC7B,IAAK,GACL,SAAU,GACV,aAAc,MACd,aAAc,GACtB,CAAK,EACL,SAASH,EAASI,EAAO,CACrBA,EAAM,eAAc,EACpBR,EAAU,UAAY,GACtBX,EAAc,EACdD,EAAca,EAAM,MAAM,OAC9BQ,EAAW,CACX,CAEA,SAASA,GAAY,CACjBtB,EAAUC,EAAaC,CAAW,EAAE,KAAKI,GAAQ,CAC7CU,EAAYV,EAAK,UACrBO,EAAU,mBAAmB,YAAaJ,EAAOH,CAAI,CAAC,EACtDa,EAAS,QAAO,EAChBI,EAAqBjB,CAAI,CAC7B,CAAC,EACI,MAAME,GAAS,CACZ,QAAQ,IAAIA,CAAK,CACzB,CAAK,CACL,CACA,SAASU,GAAa,CAClBhB,IACAoB,GACJ,CACA,SAASC,EAAqBjB,EAAM,CAC5BO,EAAU,SAAS,OAASG,EAChCD,EAAY,MAAM,QAAU,QAERb,EAAc,IACfc,GACjBD,EAAY,MAAM,QAAU,OAC5BR,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,6DACT,gBAAiB,UACjB,aAAc,OACd,WAAY,OACZ,iBAAkB,UAClB,SAAU,UAClB,CAAO,GAED,aAAaD,CAAI,CAGvB,CAEA,SAASkB,GAAe,CACtB,MAAMC,EAAaZ,EAAU,kBAAkB,sBAAqB,EAAG,OACvE,OAAO,SAAS,CACd,IAAK,EAAIY,EACT,SAAU,QACd,CAAG,CACH,CAEAZ,EAAU,iBAAiB,SAAUW,CAAY"}